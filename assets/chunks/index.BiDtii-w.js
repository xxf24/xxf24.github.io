import{B as y,aw as H,K as U,A as W,c as I,ay as q,d as P,o as b,a as p,b as t,F as h,q as S,r as F,Y as N,n as M,t as B,_ as Q,av as V,L as K,J as j,az as Y,y as m,w as z,aA as E,aB as L,e as C,R as A,k as D,v as J,T as G,j as X,g as Z}from"./framework.D5y5L8WJ.js";function O(n=8){const d=[],a=Array(n),l=(1<<n)-1,k=n+1>>1;return v(),[...d,...o(n,d)];function v(u=0,s=0,f=0,$=0){if(u===n){d.push([...a]);return}let i=l&~(s|f|$);for(;i;){const r=i&-i,w=31-Math.clz32(r);if(u===0&&w>=k)return;a[u]=w,v(u+1,s|r,(f|r)<<1,($|r)>>1),i^=r}}function o(u,s){const f=[];if(!(u&1))for(let i=s.length-1;i>=0;i--)f.push(s[i].map(r=>u-1-r));else{const i=u>>1;for(let r=s.length-1;r>=0;r--)s[r][0]!==i&&f.push(s[r].map(w=>u-1-w))}return f}}function ee(n){const d=y(n.value),a=H(),l=y(0);let k=0,v=0;const o=y(!1);U(()=>{o.value&&(l.value=a.value-k)});const u=W([]),s=y(1),f=I(()=>u.value.length),$=I(()=>u.value[s.value-1]);function i(c=s.value+1){const g=f.value,e=s.value;c===g+1&&e===g?s.value=1:c===0&&e===1?s.value=g:s.value=Math.max(1,Math.min(g,c))}const{workerFn:r,workerTerminate:w}=q(c=>JSON.stringify(O(c)),{localDependencies:[O]});function T(){o.value||(o.value=!0,k=a.value,r(n.value).then(c=>{o.value=!1,u.value=JSON.parse(c),i(s.value),d.value=n.value,v=l.value}).catch(c=>{console.error(c),o.value=!1,n.value=d.value,l.value=v}))}return{boardN:d,timer:l,isCalculating:o,solutionCount:f,currentSolution:$,inputSolutionIndex:s,updateInputSolutionIndex:i,doCalculate:T}}const te={class:"absolute inset-0"},se={class:"absolute inset-$edge"},le={class:"absolute left-0 top-0"},ne=P({__name:"chess-board",props:{n:{default:8},side:{default:36},edge:{default:32},colors:{default:()=>["#ffcf9f","#d28c45"]}},setup(n){const d=I(()=>({"--side":`${n.side}px`,"--edge":`${n.edge}px`,"--size":`${n.side*n.n+n.edge*2}px`})),a=[{key:"left",outerClass:"absolute left-0 top-$edge flex flex-col",innerClass:"w-$edge h-$side",text:l=>n.n-l+1},{key:"right",outerClass:"absolute right-0 top-$edge flex flex-col",innerClass:"w-$edge h-$side",text:l=>n.n-l+1},{key:"top",outerClass:"absolute top-0 left-$edge flex",innerClass:"w-$side h-$edge",text:l=>String.fromCodePoint(96+l)},{key:"bottom",outerClass:"absolute bottom-0 left-$edge flex",innerClass:"w-$side h-$edge",text:l=>String.fromCodePoint(96+l)}];return(l,k)=>(b(),p("div",{class:"relative h-$size w-$size rounded-lg bg-slate-100 dark:bg-zinc-800",style:N(d.value)},[t("div",te,[(b(),p(h,null,S(a,v=>t("div",{key:v.key,class:M(v.outerClass)},[(b(!0),p(h,null,S(l.n,o=>(b(),p("div",{key:o,class:M([v.innerClass,"flex items-center justify-center op-80 text-sm font-mono"])},B(v.text(o)),3))),128))],2)),64))]),t("div",se,[(b(!0),p(h,null,S(l.n,(v,o)=>(b(),p("div",{key:o,class:"relative flex"},[(b(!0),p(h,null,S(l.n,(u,s)=>(b(),p("div",{key:s,style:N({background:l.colors[(s+o)%2]}),class:"h-$side w-$side shrink-0"},[F(l.$slots,"bg-layer",{x:s,y:o})],4))),128))]))),128)),t("div",le,[F(l.$slots,"chess-layer",{side:l.side})])])],4))}}),oe={};function ae(n,d){return b(),p("div",null,d[0]||(d[0]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 512 512"},[t("path",{fill:"currentColor",d:"M188.28 59.47c-19.086 0-34.56 15.468-34.56 34.56c0 16.077 10.983 29.57 25.843 33.44l-35.344 81.936c15.877 2.885 27.905 16.784 27.905 33.5c0 18.806-15.23 34.063-34.03 34.063c-18.802 0-34.032-15.258-34.032-34.064c0-13.37 7.703-24.924 18.906-30.5l-50.814-79.22c8.007-5.82 13.22-15.24 13.22-25.905c0-17.693-14.314-32.06-32-32.06c-17.688 0-32.032 14.37-32.032 32.06c0 17.693 14.344 32.032 32.03 32.032c.734 0 1.468-.014 2.188-.062l41.907 227h316l41.936-227c.72.048 1.455.063 2.188.063c17.686 0 32.03-14.34 32.03-32.032c0-17.693-14.344-32.06-32.03-32.06c-17.687 0-32.03 14.37-32.03 32.06c-.002 10.723 5.286 20.187 13.373 26l-50.656 79.532c10.778 5.72 18.126 17.04 18.126 30.094c0 18.806-15.23 34.063-34.03 34.063s-34.032-15.258-34.032-34.064c0-17.11 12.602-31.267 29.03-33.687l-34.75-81.532c15.275-3.577 26.657-17.287 26.657-33.657c0-19.094-15.474-34.56-34.56-34.56c-19.09 0-34.564 15.468-34.564 34.56c0 14.798 9.308 27.415 22.375 32.345L268 202.345c14.62 4.52 25.25 18.112 25.25 34.218c0 19.796-16.053 35.843-35.844 35.843c-19.79 0-35.812-16.047-35.812-35.844c0-15.158 9.403-28.102 22.687-33.343l-44.124-76.72c13.234-4.845 22.688-17.552 22.688-32.47c0-19.094-15.475-34.56-34.563-34.56zM97.438 384.936c-23.978 3.763-22.86 39.844 4.188 39.844h6.656l.064.345h294.28l.063-.344h7.625c26.034 0 27.88-35.928 4.313-39.842H97.437z"})],-1)]))}const ie=Q(oe,[["render",ae]]),ue={class:"flex flex-col"},re={class:"flex items-center gap-4"},de={class:"input-selector"},ce=["disabled"],ve=["disabled"],fe={class:"mt-5"},me={class:"flex items-center gap-2 text-sm"},xe={class:"min-w-14 text-center font-mono border-b border-b-solid border-b-gray-400/40"},be={class:"min-w-14 text-center font-mono border-b border-b-solid border-b-gray-400/40"},pe={class:"mt-5 max-w-full of-auto"},ge={class:"relative inline-flex"},$e={class:"absolute inset-0 rounded-lg flex items-center justify-center bg-white/60 dark:bg-black/70"},ke={class:"ml-2 mt-2 text-xs op-80"},we={class:"ml-4 flex items-center gap-2 text-sm"},Ce={class:"input-selector"},ye=P({__name:"main",setup(n){const d=V("n-queen-mode","automatic"),a=V("n-queen-n",8),{boardN:l,isCalculating:k,timer:v,solutionCount:o,currentSolution:u,inputSolutionIndex:s,updateInputSolutionIndex:f,doCalculate:$}=ee(a);K(()=>{d.value==="automatic"&&$()}),j(a,g=>{d.value==="automatic"&&g!==l.value&&$()});const i=I(()=>k.value&&v.value>150),r=y(3e3),{resume:w,pause:T}=Y(()=>f(),r,{immediate:!1}),c=y(!1);return j(c,g=>g?w():T()),(g,e)=>(b(),p("div",ue,[t("div",re,[e[10]||(e[10]=t("div",{class:"text-2xl font-bold"},"N",-1)),e[11]||(e[11]=t("div",{class:"text-2xl font-bold"},"=",-1)),t("div",de,[t("button",{class:"w-9 text-base",disabled:m(a)<=3,onClick:e[0]||(e[0]=x=>a.value--)},e[8]||(e[8]=[t("i",{class:"i-lucide-minus"},null,-1)]),8,ce),z(t("input",{class:"w-24 text-xl","onUpdate:modelValue":e[1]||(e[1]=x=>L(a)?a.value=x:null),readonly:""},null,512),[[E,m(a),void 0,{number:!0}]]),t("button",{class:"w-9 text-base",disabled:m(a)>=15,onClick:e[2]||(e[2]=x=>a.value++)},e[9]||(e[9]=[t("i",{class:"i-lucide-plus"},null,-1)]),8,ve)])]),t("div",fe,[t("div",me,[e[12]||(e[12]=C(" 找到 ")),t("div",xe,B(i.value?"?":m(o)),1),e[13]||(e[13]=C(" 种摆法，用时 ")),t("div",be,B((Math.max(m(v),10)/1e3).toFixed(2)),1),e[14]||(e[14]=C(" 秒 "))])]),t("div",pe,[t("div",ge,[A(ne,{n:m(l)},{"chess-layer":D(({side:x})=>[(b(!0),p(h,null,S(m(u),(R,_)=>(b(),Z(ie,{style:N({transform:`translate(${R*x}px, ${_*x}px)`,fontSize:`${x*.7}px`}),class:"absolute h-$side w-$side text-[#333] flex items-center justify-center transition duration-300"},null,8,["style"]))),256))]),_:1},8,["n"]),A(G,{name:"fade"},{default:D(()=>[z(t("div",$e,e[15]||(e[15]=[t("i",{class:"i-svg-spinners-blocks-shuffle-3 text-3xl"},null,-1)]),512),[[J,i.value]])]),_:1})])]),m(o)>0?(b(),p("div",{key:0,class:M(["mt-1 flex items-center",i.value&&"invisible"])},[t("button",{class:"p-3 rounded-full text-base",onClick:e[3]||(e[3]=x=>c.value=!c.value)},[t("i",{class:M(c.value?"i-lucide-pause":"i-lucide-play")},null,2)]),z(t("div",ke,e[16]||(e[16]=[C(" 轮播中 "),t("i",{class:"align-end i-svg-spinners-3-dots-fade"},null,-1)]),512),[[J,c.value]]),t("div",we,[e[19]||(e[19]=C(" 第 ")),t("div",Ce,[t("button",{class:"w-8",onClick:e[4]||(e[4]=x=>m(f)(m(s)-1))},e[17]||(e[17]=[t("i",{class:"i-lucide-skip-back"},null,-1)])),z(t("input",{"onUpdate:modelValue":e[5]||(e[5]=x=>L(s)?s.value=x:null),class:"w-24 text-base font-mono",onChange:e[6]||(e[6]=x=>m(f)())},null,544),[[E,m(s),void 0,{number:!0,lazy:!0}]]),t("button",{class:"w-8",onClick:e[7]||(e[7]=x=>m(f)(m(s)+1))},e[18]||(e[18]=[t("i",{class:"i-lucide-skip-forward"},null,-1)]))]),e[20]||(e[20]=C(" 种摆法 "))])],2)):X("",!0)]))}}),Se=Q(ye,[["__scopeId","data-v-d4a3e226"]]);export{Se as default};
